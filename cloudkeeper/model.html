<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Model &mdash; Cloudkeeper v2.0.0a1 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Spotlight: API" href="components/ckcore_spotlight.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


  <a href="../index.html" class="icon icon-home">
  
    <img src="../_static/SomeEngineering_Logo_m.png" class="logo" alt="Logo"/>
  
  Cloudkeeper

</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Introduction</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/quick_start.html">Quick start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#install-run-cloudkeeper">Install &amp; Run Cloudkeeper</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#aws-credentials">AWS Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#run-cloudkeeper">Run Cloudkeeper</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#start-the-cloudkeeper-cli">Start the Cloudkeeper CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#collect-aws-inventory">Collect AWS Inventory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#you-have-this-many-ressources">You have this many ressources!</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#usage-of-the-cloudkeeper-cli">Usage of the Cloudkeeper CLI</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#how-to-access-help">How to access help</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#list-your-resource-types">List your resource types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#query-your-resource-types">Query your resource types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#count-and-filter-your-resources">Count and filter your resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/quick_start.html#you-made-it">You made it!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#what-now">What now?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/quick_start.html#how-you-get-more-assistance">How you get more assistance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/setup_individual_components.html">Setup individual components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/setup_individual_components.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/setup_individual_components.html#prepare-your-environment">Prepare your environment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#example-for-ckcore">Example for <code class="docutils literal notranslate"><span class="pre">ckcore</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#arangodb">ArangoDB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#run">Run</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#prepare-graph-database-for-ckcore">Prepare graph database for <code class="docutils literal notranslate"><span class="pre">ckcore</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/setup_individual_components.html#install-cloudkeeper-components">Install Cloudkeeper components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#ckcore">ckcore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#install-ckcore">Install ckcore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#run-ckcore">Run ckcore</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#securing-ckcore">Securing ckcore</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#cksh">cksh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#install-cksh">Install cksh</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#id2">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#run-cksh">Run cksh</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#ckworker">ckworker</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#install-ckworker">Install ckworker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#ckworker-plugins">ckworker plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#id3">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#run-ckworker">Run ckworker</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#ckmetrics">ckmetrics</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#install-ckmetrics">Install ckmetrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#id4">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting_started/setup_individual_components.html#run-ckmetrics">Run ckmetrics</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/setup_individual_components.html#optional-run-prometheus">(Optional) Run Prometheus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#id6">Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/setup_individual_components.html#you-made-it">You made it!</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#what-now">What now?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/setup_individual_components.html#how-you-get-more-assistance">How you get more assistance</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/access_permissions.html">Access Permissions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/access_permissions.html#aws-permissions">AWS Permissions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/access_permissions.html#discovery-only">Discovery only</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/access_permissions.html#full-capabilities">Full capabilities</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../manual/discovery.html">Discovery</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#graph-node">Graph Node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/graph_node_spotlight.html">Spotlight: Graph Node</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#available-commands">Available Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#query">query</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#reported">reported</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#desired">desired</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#metadata">metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#selecting-nodes">Selecting Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-by-kind">Select nodes by kind</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-by-predicate">Select nodes by predicate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/discovery.html#property-path">property_path</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/discovery.html#operation">operation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/discovery.html#value">value</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/discovery.html#example-predicates">Example predicates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-by-id">Select nodes by id</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#combine-selections">Combine selections</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#graph-edges">Graph Edges</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#traversal-selectors">Traversal Selectors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#inbound-and-outbound">Inbound and outbound</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-all-direct-nodes-outbound-of-node">Select all direct nodes outbound of node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-all-direct-nodes-inbound-of-node">Select all direct nodes inbound of node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-that-include-the-current-node">Select nodes that include the current node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-with-a-defined-depth-in-the-graph">Select nodes with a defined depth in the graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-nodes-with-an-undefined-depth-in-the-graph">Select nodes with an undefined depth in the graph</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#select-inbound-and-outbound-nodes">Select inbound and outbound nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#abbreviations">Abbreviations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#traversal-selection-commands">Traversal Selection Commands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#ensuring-an-existing-defined-graph-structure">Ensuring an existing defined graph structure</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#ensure-there-is-no-matching-node">Ensure there is no matching node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#ensure-there-is-at-least-one-matching-node">Ensure there is at least one matching node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#ensure-there-is-a-specific-count-of-matching-nodes">Ensure there is a specific count of matching nodes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/discovery.html#aggregation-of-data">Aggregation of data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#aggregation-example">Aggregation example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#syntax-of-an-aggregation-query-part">Syntax of an aggregation query part</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/discovery.html#examples-of-aggregation-functions">Examples of aggregation functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/action.html">Action</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual/action.html#how-cloudkeeper-maintains-your-resources">How Cloudkeeper maintains your resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/action.html#workflows">Workflows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/action.html#collect">collect</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/action.html#cleanup">cleanup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/action.html#metrics">metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../manual/action.html#collect-and-cleanup">collect_and_cleanup</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/action.html#working-with-tags">Working with tags</a></li>
<li class="toctree-l2"><a class="reference internal" href="../manual/action.html#deleting-resources">Deleting resources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/action.html#mark-resources-for-deletion">Mark resources for deletion</a></li>
<li class="toctree-l3"><a class="reference internal" href="../manual/action.html#delete-the-actual-ressources">Delete the actual ressources</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../manual/query_library.html">Query library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../manual/query_library.html#by-kind">By kind</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../manual/query_library.html#aws-alb">aws_alb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/query_library.html#orphaned-load-balancers-that-have-no-active-backend">Orphaned Load Balancers that have no active backend</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual/query_library.html#aws-iam-access-key">aws_iam_access_key</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/query_library.html#number-of-active-access-keys-per-user">Number of active access keys per user</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual/query_library.html#certificate">certificate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/query_library.html#find-expired-ssl-certificates-currently-in-use">Find expired ssl certificates currently in use</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual/query_library.html#quota">quota</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/query_library.html#find-current-quota-consumption-to-prevent-service-interruptions">Find current quota consumption to prevent service interruptions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../manual/query_library.html#volume">volume</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../manual/query_library.html#discover-unused-volumes">Discover unused volumes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../manual/query_library.html#query-missing">Query missing?</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloudkeeper</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="components/index.html">Components</a><ul>
<li class="toctree-l2"><a class="reference internal" href="components/index.html#ckcore">ckcore</a><ul>
<li class="toctree-l3"><a class="reference internal" href="components/ckcore_spotlight.html">Spotlight: API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="components/ckcore_spotlight.html#evaluate">Evaluate</a></li>
<li class="toctree-l4"><a class="reference internal" href="components/ckcore_spotlight.html#execute">Execute</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="components/index.html#cksh">cksh</a></li>
<li class="toctree-l2"><a class="reference internal" href="components/index.html#ckmetrics">ckmetrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="components/index.html#ckworker">ckworker</a></li>
<li class="toctree-l2"><a class="reference internal" href="components/index.html#cklib">cklib</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#resource">Resource</a></li>
<li class="toctree-l2"><a class="reference internal" href="#resource-hierarchy">Resource Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#kind-cli-command"><code class="docutils literal notranslate"><span class="pre">kind</span></code> CLI command</a></li>
<li class="toctree-l2"><a class="reference internal" href="#complex-and-simple-kinds">Complex and simple kinds</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Cloudkeeper</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
      <li>Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/cloudkeeper/model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="model">
<span id="id1"></span><h1>Model<a class="headerlink" href="#model" title="Permalink to this headline"></a></h1>
<p>Cloudkeeper is able to collect data from different data sources that is maintained in a graph.
It has a pluggable API to interface with different cloud providers.
The data model of the cloud providers is naturally defined by the cloud provider, so Cloudkeeper
needs to deal with different data sources and different data models.</p>
<p>To make your life easier, Cloudkeeper introduces a model abstraction.
Every resource collected by CloudKeeper is described by a data model and checked for consistency during import time.
To show an example, the following diagram shows an excerpt of the complete cloudkeeper data model.</p>
<div class="section" id="resource">
<h2>Resource<a class="headerlink" href="#resource" title="Permalink to this headline"></a></h2>
<p>Every resource collected by CloudKeeper has the kind <code class="docutils literal notranslate"><span class="pre">resource</span></code> as base.
Here we see properties, that is common to every resource, no matter which resource or which cloud provider:</p>
<a class="reference internal image-reference" href="../_images/resource.svg"><img alt="Resource Model" src="../_images/resource.svg" width="200" /></a>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: identifier of this cloud specific resource.
This id does not need to be unique over all resources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: the cloud specific name of this resource.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kind</span></code>: this property is synthesized by Cloudkeeper and defines the concrete kind of this resource.
Example: in AWS there exist <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ebs-volume.html">AWS EC2 Volume</a>
All collected AWS EC2 volumes would be of kind <code class="docutils literal notranslate"><span class="pre">aws_ec2_volume</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: most cloud provider offer the ability to define tags on resources.
Tags are simple key value pairs of type string that are held in a dictionary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctime</span></code>: the point in time when the resource has been created.
Note: when the cloud provider does not provide this information, Cloudkeeper
will set this property to the time, when it has discovered this resource the first time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atime</span></code>: the last collected point in time when the resource has been accessed.
Note: this this time is not available on all resources for all cloud providers.
Cloudkeeper tries to do its best to synthesize the last access time based on the resource type.
(Example: it uses AWS CloudWatch to detect last usages etc).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mtime</span></code>: the last collected point in time when the resource has been modified.
Note: this this time is not available on all resources for all cloud providers.
Cloudkeeper tries to do its best to synthesize the last modification time based on the resource type.</p></li>
</ul>
</div>
<div class="section" id="resource-hierarchy">
<h2>Resource Hierarchy<a class="headerlink" href="#resource-hierarchy" title="Permalink to this headline"></a></h2>
<p>Cloukeeper introduces a resource hierarchy. This hierarchy tries to do its best to abstract over
the different data models from different cloud providers, delivering a consistent model to retrieve
data from your different clouds.</p>
<p>Every concrete resource in Cloudkeeper has the <code class="docutils literal notranslate"><span class="pre">resource</span></code> kind as root.
Cloudkeeper introduces abstract model classes for almost all different resources that are collected.</p>
<a class="reference internal image-reference" href="../_images/resource_example.svg"><img alt="Resource Example Model" src="../_images/resource_example.svg" width="75%" /></a>
<p>Let us make this very clear by showing a specific example: <a class="reference external" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-ebs-volume.html">AWS EC2 Volume</a>
which is modeled as <code class="docutils literal notranslate"><span class="pre">aws_ec2_volume</span></code>. As you can see the <code class="docutils literal notranslate"><span class="pre">aws_ec2_volume</span></code> introduces 4 properties.
It is inheriting from the base kind <code class="docutils literal notranslate"><span class="pre">volume</span></code>, which itself is inheriting all properties from base kind <code class="docutils literal notranslate"><span class="pre">resource</span></code>.
The complete data that is collected and stored could look like this example data:</p>
<a class="reference internal image-reference" href="../_images/ec2_volume_example.svg"><img alt="Example Json" src="../_images/ec2_volume_example.svg" width="60%" /></a>
<p>You might have noticed, that not only <code class="docutils literal notranslate"><span class="pre">aws_ec2_instance</span></code> is a subtype of <code class="docutils literal notranslate"><span class="pre">volume</span></code>,
but also <code class="docutils literal notranslate"><span class="pre">gcp_disk</span></code>. A google cloud resource of type <a class="reference external" href="https://cloud.google.com/compute/docs/reference/rest/v1/disks">Disk</a>
is conceptually similar to an AWS EC2 Volume and shares quite some properties.
The model makes it easy to query conceptually common data and also to retrieve and reason about this data.</p>
</div>
<div class="section" id="kind-cli-command">
<h2><code class="docutils literal notranslate"><span class="pre">kind</span></code> CLI command<a class="headerlink" href="#kind-cli-command" title="Permalink to this headline"></a></h2>
<p>If you want to see all available kinds in the system, you can use the <code class="docutils literal notranslate"><span class="pre">kind</span></code> cli command in <code class="docutils literal notranslate"><span class="pre">cksh</span></code>.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$&gt; kind
- access_key
- account
- any
- autoscaling_group
- aws_account
.
.
</pre></div>
</div>
<p>If you want to see the properties of a specific kind use <code class="docutils literal notranslate"><span class="pre">kind</span> <span class="pre">&lt;name&gt;</span></code>:</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">kind</span> <span class="n">aws_ec2_volume</span>
<span class="n">name</span><span class="p">:</span> <span class="n">aws_ec2_volume</span>
<span class="n">bases</span><span class="p">:</span>
<span class="o">-</span> <span class="n">resource</span>
<span class="o">-</span> <span class="n">volume</span>
<span class="o">-</span> <span class="n">aws_ec2_volume</span>
<span class="n">properties</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="nb">id</span>
  <span class="n">kind</span><span class="p">:</span> <span class="n">string</span>
<span class="o">.</span>
<span class="o">.</span>
</pre></div>
</div>
</div>
<div class="section" id="complex-and-simple-kinds">
<h2>Complex and simple kinds<a class="headerlink" href="#complex-and-simple-kinds" title="Permalink to this headline"></a></h2>
<div class="line-block">
<div class="line">We have looked at complex kinds so far: a complex kind has a name and a set of properties.</div>
<div class="line">Each property has a name and also a kind.</div>
<div class="line">The kind of such a property can be a complex or a simple kind.</div>
</div>
<p>There are several simple kinds that are available in Cloudkeeper out of the box:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>kind</p></th>
<th class="head"><p>Json type</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>string</p></td>
<td><p>string</p></td>
<td><p>“foo”, “bla”, “some long string”</p></td>
</tr>
<tr class="row-odd"><td><p>boolean</p></td>
<td><p>boolean</p></td>
<td><p>true, false</p></td>
</tr>
<tr class="row-even"><td><p>null</p></td>
<td><p>null</p></td>
<td><p>null</p></td>
</tr>
<tr class="row-odd"><td><p>int32</p></td>
<td><p>number</p></td>
<td><p>1234, 4321, -123</p></td>
</tr>
<tr class="row-even"><td><p>int64</p></td>
<td><p>number</p></td>
<td><p>1234, 4321, -123</p></td>
</tr>
<tr class="row-odd"><td><p>float</p></td>
<td><p>number</p></td>
<td><p>12, 12.1234, -23.123</p></td>
</tr>
<tr class="row-even"><td><p>double</p></td>
<td><p>number</p></td>
<td><p>12, 12.1234, -23.123</p></td>
</tr>
<tr class="row-odd"><td><p>datetime</p></td>
<td><p>string</p></td>
<td><p>“2021-03-15T23:04:56Z”, “2021-03-15”, “-3d”</p></td>
</tr>
<tr class="row-even"><td><p>date</p></td>
<td><p>string</p></td>
<td><p>“2021-03-15”, “03/15/2021”, “-3d”</p></td>
</tr>
<tr class="row-odd"><td><p>any</p></td>
<td><p>any of the above</p></td>
<td><p>null, true, “test”, 123, -12.43</p></td>
</tr>
</tbody>
</table>
<p>Since Cloudkeeper uses json in order to exchange data, all the different simple types
have to be expressed as simple json type.</p>
<p>Cloudkeeper also introduces some additional simple types like <code class="docutils literal notranslate"><span class="pre">datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">date</span></code>.
The reason for this is the ability to coerce proper values from values given to Cloudkeeper.</p>
<p>Example: Let us assume a user want to query a resource by creation time.
According to the model we would need to filter for the <code class="docutils literal notranslate"><span class="pre">ctime</span></code> property.
Since Cloudkeeper knows the type of <code class="docutils literal notranslate"><span class="pre">ctime</span></code> (which is of kind datetime), it can
do its best to interpret the value given by the user.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="n">ctime</span> <span class="o">&lt;</span> <span class="s2">&quot;2018-09-28&quot;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ctime</span></code> is of type datetime. datetime is stored in CloudKeeper always as ISO formatted datetime string.
To make this query effective, the term <code class="docutils literal notranslate"><span class="pre">&quot;2018-09-28&quot;</span></code> is coerced into a valid datetime.
Depending on the server time the value would be evaluated to something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="n">ctime</span> <span class="o">&lt;</span> <span class="s2">&quot;2021-09-28T22:00:00Z&quot;</span>
</pre></div>
</div>
<p>This also allows the usage of relative times, when the type of the property is known as datetime.
If we want to query resources, that have been created in the last 3 days, we could express this with a relative datetime.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="n">ctime</span> <span class="o">&gt;</span> <span class="s2">&quot;-3d&quot;</span>
</pre></div>
</div>
<p>This translates the term <code class="docutils literal notranslate"><span class="pre">&quot;-3d&quot;</span></code> using the current server time into a valid datetime.
On my machine this translates into:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">match</span> <span class="n">ctime</span> <span class="o">&gt;</span> <span class="s2">&quot;2021-09-26T08:13:56Z&quot;</span>
</pre></div>
</div>
<p>The special type <code class="docutils literal notranslate"><span class="pre">any</span></code> is only used in scenarios, when the type is really not known and
could be anything. Coercing is not possible for such a type.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="components/ckcore_spotlight.html" class="btn btn-neutral float-left" title="Spotlight: API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Some Engineering Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-237E5P27RE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-237E5P27RE', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>